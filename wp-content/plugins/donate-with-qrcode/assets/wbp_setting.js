var WB=window.WB||{};WB.DWPSettings={init:function(t){var a=WB.DWPSettings;a.switchAction(t),a.uploadFile(t),a.tabs(t),a.analytics(t),a.typePreview(t)},tabs:function(t,a,n){var n=n||{},e=a||t("#J_tabBox"),i=n.tabNav||e.find(".tab-nav-item,.tab-nav li"),o=n.tabCont||e.find(".tab-cont"),r=n.currClass||"current",c=n.tabEvent||"click mouseover",s=n.callBackFn,u=0;i.on(c,function(){u=t(this).index(),i.removeClass(r).eq(u).addClass(r),o.removeClass(r).eq(u).addClass(r),s&&s()})},switchAction:function(t,a){(a||t(".wb-switch[data-target]")).on("change",function(){var a=t(this),n=t(a.data("target"));a.prop("checked")?(a.attr("data-value","true"),n.addClass("active")):(a.attr("data-value","false"),n.removeClass("active"))})},uploadFile:function(t,a,n){var e;(a||t(".section-upload .wbs-upload-btn")).click(function(a){var i=window.frame||window.wb_frame;e=n||t(this).prev("input"),i||(i=wp.media({title:"选择文件",button:{text:"确认"},multiple:!1}),window.wb_frame=i,i.on("select",function(){var t=i.state().get("selection").toJSON()[0].url;e.val(t).focus()})),i.open()})},analytics:function(t){var a=t("[data-wba-source]").length&&t("[data-wba-source]").data("wba-source")||window.wbaSource||document.domain;t("a[data-wba-campaign]").each(function(){var n=t(this),e=n.data("wba-campaign"),i=n.data("wba-media")||"link",o=n.attr("href");o+=o.match("[?]")?"&":"?",o+="utm_source="+a,o+="&utm_media="+i,o+="&utm_campaign="+e,n.attr("href",o)})},typePreview:function(t){t("#J_typeItems .wbs-radio").on("change input",function(){console.log(t('[name="dwqr_option[display_group]:checked"]').val()),t('input[name="dwqr_option[display_group]"]:checked').val()>0?t("#J_typePreview .wb-btn-share").show():t("#J_typePreview .wb-btn-share").hide()})}},jQuery(document).ready(function(t){WB.DWPSettings.init(t),t("#optionsframework-wrap").find("input,textarea").on("change",function(){t(window).on("beforeunload",function(){return confirm("您修改的设置尚未保存，确定离开此页面吗？")}),t("#optionsframework-submit").addClass("sticky-bottom")}),t("#optionsframework-submit .wbs-btn-primary").on("click",function(){t(window).unbind("beforeunload")})});